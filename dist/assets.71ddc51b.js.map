{"version":3,"sources":["assets/SimpleMediaPlayer.ts","assets/plugins/AutoPlay.ts","assets/plugins/AutoPause.ts","assets/index.ts"],"names":[],"mappings":";;;;;;AAAA,AEEA,ADAA,IDFA,AEEA,ADAA,QAAA,CCAA,QFFA;AAAA,AEEA,ADAA;ADFA,AEEA,ADAA,YDFA,AEEA,ADAA;ADEE,AEEE,ADHA,WDCF,AEEE,ADHA,QAAA,CCGA,EDHA,CCGA,ADHe,KDCjB,CAAY,MAAZ,EAAkB;AAChB,AEEE,SFFG,AEEE,KFFP,GAAa,CEEX,GAAiB,EFFA,CAAC,CEElB,CFFF;AACA,AEEE,ADJF,EAAA,ODEK,AEEE,CDJP,CAAA,KDEA,GAAe,CCFf,CAAA,GAAA,CDEqB,CAAC,CEEpB,ADJF,GCI4B,GFFb,EEEkB,EFFA,ACF7B,EDEJ,CAFgB,CAEqB,ECFrC,EAA6B,QCID,CAAwB,IAAxB,CAA6B,IAA7B,CAA1B;ACRN,ADSM,ADJE,IELR,IFKW,CCIA,ADJC,MAAM,CAAC,KAAP,CAAa,CELzB,EDSM,CCTN,CFKQ,CCIsB,CDJC,ICII,QCTnC,CAAA,OAAA,ADS8B,CCT9B,ADSoD,IAAtB,CAA2B,IAA3B,CAAxB,WCTN,CAAA,CAAA;AHQI,AECgE,ADHxD,MAAA,GDEH,GCFS,CAAC,IAAP,GDER;AACD,AGRH,AFMS,IENT,CFGiC,CAGxB,QENT,GAAA,eAAA,CAAA,OAAA,CAAA,oBAAA,CAAA,CAAA;ADUI,EAAA,SAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,MAAJ,EAAU;AFDJ,AGRV,ADUM,EFFI,EGRV,KDUW,MCVX,ADUM,GCVN,ADUoB,CFFV,CAAA,IEEJ,KFFI,CAAA,GGRV,CAAA,OHQU,AGRV,CAAA,EHQE,YAAA,OGRF,CAAA,CAAA,EAEE;AHMA,AEII,ADNE,IAAA,IDEN,AEIU,EDNE,CAAC,EDEb,ECFM,CDEN,AEIkB,GAAG,CFJrB,GEIyB,oBAAJ,CAAyB,KAAK,kBAA9B,EAAkD;AACjE,ADNH,GALD,GCWI,SAAS,EAAE,KAAK;AFJpB,AGNF,ADSuE,ICTjE,CDSe,CAAjB,GFHG,OAAL,AGNgB,CHMH,EGNmB,KHMhC,CAAqB,EGNmB,CAAC,OHMpB,MAAA,AGNW,CAAuB,CHM5B,QGNK,CAAlC;AHOI,AGNJ,ADYI,ADTD,IEHG,ADYF,EFNA,GGNO,GHMD,AGNsB,ADYpB,CFND,AEME,GFNT,CAAW,GGNyB,ADYpC,CCZqC,ADYpB,CFNjB,EADyB,CACP,CEMI,MAAL,CAAY,CCZD,CAAuB,GDYnD,UCZ4B,CAAhC;AHOG,AGNH,ADaI,ADVN,IEHQ,ADaF,CFTF,ICDJ,CEHc,EDaA,CCbsB,ADarB,ICbyB,AFGxC,YCUM,CAA0B,MCbQ,CAAA,OAAJ,CAAsB,GDapD,EAA8C,KAAK,gBAAnD;AFNH,AGNC,ADaC,ADnBL,CAAA,CEMI,CHEM,AECN,ADTJ,CEMM,EAAE,KADkD;AAEtD,EAAA,OAAO,EAAE,CAAC,IAAI,UAAA,CAAA,OAAJ,EAAD,EAAiB,IAAI,WAAA,CAAA,OAAJ,EAAjB;AHMX,AGRwD,ADgB9C,ADZZ,CEJoC,CHQlC,AGRA,ADgBU,KDZZ,CAAA,GCYY,CAAA,GDZZ,GAAe,CDIb,CAAA,CEQU,CAAA,IDZZ,GDIE,CAAA,IAAA,GAAA,GEQU,GAAR,MFRF,IEQ6B,OAA3B,EAA+D;AFP/D,AEQE,QAAM,CFRH,IEQQ,CFRb,CAAW,CEQK,GFRhB,IEQuB,CAAC,CAAD,CAArB;AFPH,AGLC,ADcE,GFXJ,CGHM,IDcI,SAAS,GAAG,GCdG,EDcE,CAAC,MCd1B,EAAkC,SDcd,IAA2B,KAAK,SAAlD;ACbA,ADeA,ECfA,EDeA,OCfS,CAAC,CDeD,GAAG,KAAK,ICfjB,CAAwB,CDeZ,CAAY,IAAZ,ECfZ,ADeS,CCfwB,EDeA,KAAK,MAAL,CAAY,KAAZ,EAAjC,iBCfA,EAAsD,KAAtD,CAA4D,UAAA,KAAA,EAAK;AHKrE,AGJM,ADgBH,EFZH,CEKU,CCTJ,OAAO,CAAC,GAAR,CAAY,GHIlB,CAAA,CGJuB,CAAC,OHIxB,AGJM,CHIN,KAAA,GAAA,YAAA;AACE,AGJG,GAFD,MHMG,KAAL,CAAW,KAAX;AACD,AGJE,ADgBO,ECdZ,ADcY,CFdV,QEcU,CAAA,SAAA,CAAA,gBAAA,GAAR,YAAA;AACI,QAAM,SAAS,GAAG,QAAQ,CAAC,eAAT,KAA6B,SAA/C;AFZN,AEaM,EFbN,EEaM,SAAS,GAAG,GFblB,CAAA,CEauB,MAAL,CAAY,CFb9B,CAAA,EEakB,EAAH,GA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","file":"assets.71ddc51b.js","sourceRoot":"..","sourcesContent":["class SimpleMediaPlayer {\n  media: HTMLMediaElement;\n  plugins: Array<any>;\n\n  constructor(config) {\n    this.media = config.el;\n    this.plugins = config.plugins || []; //Default value of empty array to prevent wrong state.\n\n    this.initPlugins();\n  }\n  private initPlugins() {\n    this.plugins.forEach(plugin => {\n      plugin.run(this); //Method run must be implemented for each active plugin\n    });\n  }\n  play() {\n    this.media.play();\n  }\n  pause() {\n    this.media.pause();\n  }\n  togglePlay() {\n    this.media.paused ? this.play() : this.pause();\n  }\n  mute() {\n    this.media.muted = true;\n  }\n  unmute() {\n    this.media.muted = false;\n  }\n}\n  // SimpleMediaPlayer.prototype.toggleMute = function(){\n  //   this.media.muted = !this.media.muted;\n  //}\n  \n  export default SimpleMediaPlayer;","import SimpleMediaPlayer from \"../SimpleMediaPlayer\";\n\nclass AutoPlay{\n    constructor(){}\n    run(player: SimpleMediaPlayer){\n        if(!player.media.muted){\n            player.mute();\n        }//browser won't let it play on charging for accessibility, unless it is muted\n        player.play();\n    };\n}\nexport default AutoPlay;\n","import SimpleMediaPlayer from '../SimpleMediaPlayer';\n\nclass AutoPause {\n  private threshold: number;\n  private player: SimpleMediaPlayer;\n\n    constructor() {\n      this.threshold = 0.25;\n      this.handleIntersection = this.handleIntersection.bind(this);\n      this.handleVisibility = this.handleVisibility.bind(this);    }\n  \n    run(player) {\n      this.player = player;\n  \n      const observer = new IntersectionObserver(this.handleIntersection, {\n        threshold: this.threshold,\n      });\n  \n      observer.observe(this.player.media);\n\n      document.addEventListener('visibilitychange', this.handleVisibility);\n    }\n  \n    private handleIntersection(entries: IntersectionObserverEntry[]) {\n      const entry = entries[0];\n  \n      const isVisible = entry.intersectionRatio >= this.threshold;\n  \n      isVisible ? this.player.play() : this.player.pause();\n      \n    }\n\n    private handleVisibility(){\n        const isVisible = document.visibilityState === 'visible';\n        isVisible ? this.player.play() : this.player.pause();\n    }\n  }\n  \n  export default AutoPause;\n  ","import SimpleMediaPlayer from './SimpleMediaPlayer';\nimport AutoPlay from './plugins/AutoPlay';\nimport AutoPause from './plugins/AutoPause';\n\n  //DEFINITIONS/////////\n  const playerSchema: HTMLElement = document.querySelector('.player');\n  const video: HTMLMediaElement = document.querySelector('video.movie');\n  const player: SimpleMediaPlayer = new SimpleMediaPlayer({\n    el: video, \n    plugins: [new AutoPlay(), new AutoPause()],\n    });\n    \n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('/serviceWorker.js').catch(error => {\n        console.log(error.message);\n      });\n    }\n    \n//FUNCTIONS///////\nfunction toggleButtonMute(){\n    const icon = player.media.muted ? 'ðŸ”‡' : 'ðŸ”ˆ';\n    button__speaker.textContent = icon;\n}\nfunction handleProgress(){\n    const percent: number = (player.media.currentTime / player.media.duration) * 100;\n    progressBar.style.flexBasis = `${percent}%`;\n}\nfunction toggleButtonPlay(){\n    const icon = player.media.paused ? 'â–º' : 'âš âš';\n    button__play.textContent = icon;\n}\n//Volume and speed ranges\nfunction handleRangeUpdate() {\n    video[this.name] = this.value;\n  }\n  function moveProgress(e) {\n    const scrubTime = (e.offsetX / progress.offsetWidth) * video.duration;\n    video.currentTime = scrubTime;\n  }\n  function skip(){\n    video.currentTime += parseFloat(this.dataset.skip);;\n}\n\n//CONTROLS///////\nconst button__play: HTMLElement = document.querySelector('.button__player');\nconst button__speaker: HTMLElement = document.querySelector('.button__speaker');\nconst progress: HTMLElement = playerSchema.querySelector('.progress');\nconst progressBar: HTMLElement = playerSchema.querySelector('.progress__filled');\nconst skipButtons = playerSchema.querySelectorAll('[data-skip]');\nconst ranges = playerSchema.querySelectorAll('.player__slider');\nconst fullScreenButton: HTMLElement = document.querySelector('.full__screen');\n\n//EVENTS////////\n//Page charges\nwindow.onload = () => {\n  toggleButtonPlay();\n  toggleButtonMute();\n};\n//play/pause button\nbutton__play.onclick = () => {\n    player.togglePlay();\n    toggleButtonPlay();\n}\n//Muted button\nbutton__speaker.onclick = () => {\n    if (player.media.muted) {\n        player.unmute();\n      } else {\n        player.mute();\n      }\n    toggleButtonMute();\n}\nfunction toggleFullScreen(){\n  fullScreen = !fullScreen;\n  if(fullScreen)  video.requestFullscreen();\n}\n\nvideo.addEventListener('timeupdate', handleProgress);\nvideo.onclick = () => {\n  player.togglePlay();\n  toggleButtonPlay();\n}\n//Ranges for volume and progress\nranges.forEach(range => range.addEventListener('change',handleRangeUpdate))\nranges.forEach(range => range.addEventListener('mousemove',handleRangeUpdate))\n//Handle calcs and change of progress\nlet mousedown = false;\nprogress.addEventListener('click', moveProgress);\nprogress.addEventListener('mousemove', (e) => mousedown && moveProgress(e));\nprogress.addEventListener('mousedown', () => mousedown = true);\nprogress.addEventListener('mouseup', () => mousedown = false);\nskipButtons.forEach(button => button.addEventListener('click', skip));\nlet fullScreen = false;\nfullScreenButton.addEventListener('click', toggleFullScreen);\n\nif('serviceWorker' in Navigator){\n  navigator.serviceWorker.register('/serviceWorker.js')\n  .catch(error => {\n    console.log(error.message);\n  });\n}\n"]}